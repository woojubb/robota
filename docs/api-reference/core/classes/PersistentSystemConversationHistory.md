<!-- 
 ⚠️  AUTO-GENERATED FILE - DO NOT EDIT MANUALLY
 This file is automatically generated by scripts/docs-generator.js
 To make changes, edit the source TypeScript files or update the generator script
-->

[core](../../) / [Exports](../modules) / PersistentSystemConversationHistory

# Class: PersistentSystemConversationHistory

Conversation history implementation that maintains system messages

Extends SimpleConversationHistory with automatic system prompt management.
The system prompt is automatically maintained and can be updated dynamically.

**`See`**

../../apps/examples/04-sessions | Session and Conversation Examples

## Hierarchy

- `BaseConversationHistory`

  ↳ **`PersistentSystemConversationHistory`**

## Table of contents

### Constructors

- [constructor](PersistentSystemConversationHistory#constructor)

### Methods

- [addUserMessage](PersistentSystemConversationHistory#addusermessage)
- [addAssistantMessage](PersistentSystemConversationHistory#addassistantmessage)
- [addSystemMessage](PersistentSystemConversationHistory#addsystemmessage)
- [addToolMessage](PersistentSystemConversationHistory#addtoolmessage)
- [getMessagesByRole](PersistentSystemConversationHistory#getmessagesbyrole)
- [getRecentMessages](PersistentSystemConversationHistory#getrecentmessages)
- [addMessage](PersistentSystemConversationHistory#addmessage)
- [getMessages](PersistentSystemConversationHistory#getmessages)
- [getMessageCount](PersistentSystemConversationHistory#getmessagecount)
- [clear](PersistentSystemConversationHistory#clear)
- [updateSystemPrompt](PersistentSystemConversationHistory#updatesystemprompt)
- [getSystemPrompt](PersistentSystemConversationHistory#getsystemprompt)

## Constructors

### constructor

• **new PersistentSystemConversationHistory**(`systemPrompt`, `options?`): [`PersistentSystemConversationHistory`](PersistentSystemConversationHistory)

Create a new PersistentSystemConversationHistory instance

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `systemPrompt` | `string` | Initial system prompt to set |
| `options?` | `Object` | Configuration options passed to underlying SimpleConversationHistory |
| `options.maxMessages?` | `number` | - |

#### Returns

[`PersistentSystemConversationHistory`](PersistentSystemConversationHistory)

#### Overrides

BaseConversationHistory.constructor

#### Defined in

[conversation-history.ts:517](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L517)

## Methods

### addUserMessage

▸ **addUserMessage**(`content`, `metadata?`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `content` | `string` |
| `metadata?` | `Record`\<`string`, `any`\> |

#### Returns

`void`

#### Inherited from

BaseConversationHistory.addUserMessage

#### Defined in

[conversation-history.ts:372](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L372)

___

### addAssistantMessage

▸ **addAssistantMessage**(`content`, `functionCall?`, `metadata?`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `content` | `string` |
| `functionCall?` | `FunctionCall` |
| `metadata?` | `Record`\<`string`, `any`\> |

#### Returns

`void`

#### Inherited from

BaseConversationHistory.addAssistantMessage

#### Defined in

[conversation-history.ts:377](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L377)

___

### addSystemMessage

▸ **addSystemMessage**(`content`, `metadata?`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `content` | `string` |
| `metadata?` | `Record`\<`string`, `any`\> |

#### Returns

`void`

#### Inherited from

BaseConversationHistory.addSystemMessage

#### Defined in

[conversation-history.ts:382](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L382)

___

### addToolMessage

▸ **addToolMessage**(`toolResult`, `metadata?`): `void`

#### Parameters

| Name | Type |
| :------ | :------ |
| `toolResult` | `FunctionCallResult` |
| `metadata?` | `Record`\<`string`, `any`\> |

#### Returns

`void`

#### Inherited from

BaseConversationHistory.addToolMessage

#### Defined in

[conversation-history.ts:387](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L387)

___

### getMessagesByRole

▸ **getMessagesByRole**(`role`): [`UniversalMessage`](../modules#universalmessage)[]

#### Parameters

| Name | Type |
| :------ | :------ |
| `role` | [`UniversalMessageRole`](../modules#universalmessagerole) |

#### Returns

[`UniversalMessage`](../modules#universalmessage)[]

#### Inherited from

BaseConversationHistory.getMessagesByRole

#### Defined in

[conversation-history.ts:396](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L396)

___

### getRecentMessages

▸ **getRecentMessages**(`count`): [`UniversalMessage`](../modules#universalmessage)[]

#### Parameters

| Name | Type |
| :------ | :------ |
| `count` | `number` |

#### Returns

[`UniversalMessage`](../modules#universalmessage)[]

#### Inherited from

BaseConversationHistory.getRecentMessages

#### Defined in

[conversation-history.ts:400](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L400)

___

### addMessage

▸ **addMessage**(`message`): `void`

Add a message to conversation history (delegates to underlying history)

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `message` | [`UniversalMessage`](../modules#universalmessage) | Universal message to add |

#### Returns

`void`

#### Overrides

BaseConversationHistory.addMessage

#### Defined in

[conversation-history.ts:531](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L531)

___

### getMessages

▸ **getMessages**(): [`UniversalMessage`](../modules#universalmessage)[]

Get all messages (delegates to underlying history)

#### Returns

[`UniversalMessage`](../modules#universalmessage)[]

Array of all messages including system messages

#### Overrides

BaseConversationHistory.getMessages

#### Defined in

[conversation-history.ts:540](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L540)

___

### getMessageCount

▸ **getMessageCount**(): `number`

Get total message count (delegates to underlying history)

#### Returns

`number`

Total number of messages including system messages

#### Overrides

BaseConversationHistory.getMessageCount

#### Defined in

[conversation-history.ts:549](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L549)

___

### clear

▸ **clear**(): `void`

Clear conversation history but preserve system prompt

Clears all messages and re-adds the current system prompt.

#### Returns

`void`

#### Overrides

BaseConversationHistory.clear

#### Defined in

[conversation-history.ts:558](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L558)

___

### updateSystemPrompt

▸ **updateSystemPrompt**(`systemPrompt`): `void`

Update the system prompt and refresh system messages

Removes old system messages, updates the system prompt, and adds
the new system prompt as a system message.

#### Parameters

| Name | Type | Description |
| :------ | :------ | :------ |
| `systemPrompt` | `string` | New system prompt to set |

#### Returns

`void`

#### Defined in

[conversation-history.ts:571](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L571)

___

### getSystemPrompt

▸ **getSystemPrompt**(): `string`

Get the current system prompt

#### Returns

`string`

Current system prompt string

#### Defined in

[conversation-history.ts:591](https://github.com/woojubb/robota/blob/f2044536073df65f9112d45570cc110d351b585d/packages/core/src/conversation-history.ts#L591)
